
if(typeof(xi)=='undefined')
{var xi={jQuery:window.jQuery,extend:function(obj){this.jQuery.extend(this,obj);}}}
(function($){xi.ui={};xi.ui.dialog={create:function(call,winTitle,winContentWidth,winContentHeight){xi.ui.dialog.close();$('#xiWindowContent').remove();$('<div id="xiWindowContent" class="modal hide fade loading" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"></div>').addClass('new').appendTo('.payplans-wrap');$('<div id="xiWindowTitle" class="modal-header"></div>').appendTo('#xiWindowContent');$('<div id="xiWindowBody"  class="modal-body"></div>').appendTo('#xiWindowContent');$('<div id="xiWindowFooter" class="modal-footer"></div>').appendTo('#xiWindowContent');if(winTitle==null)winTitle='Title';if(winContentWidth!=null)this.width(winContentWidth);if(winContentHeight!=null)this.height(winContentHeight);this.title(winTitle);$('#xiWindowContent').modal('show');$('#xiWindowContent').on('hidden',function(){$('#xiWindowContent').remove();});xi.ajax.go(call.url,call.data);},button:function(actions){$('#xiWindowFooter').html('');for(var i=0;i<actions.length;i++){if(typeof actions[i].classes==="undefined"){actions[i].classes='';}
if(typeof actions[i].id==="undefined"){actions[i].id='';}
if(typeof actions[i].attr==="undefined"){actions[i].attr='';}
actions[i].click=eval("(function(){"+actions[i].click+";})");var button='<button class="'+actions[i].classes+'" id="'+actions[i].id+'" '+actions[i].attr+'>'+actions[i].text+'</button>';$(button).bind('click',actions[i].click).appendTo('#xiWindowFooter');}},body:function(body){$('#xiWindowBody').html('');if(body!=null&&body.length>0){$('<p>'+body+'</p>').appendTo('#xiWindowBody');}},title:function(title){$('#xiWindowTitle').html('');if(title!=null&&title.length>0){$('<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button><h3 id="myModalLabel">'+title+'</h3>').appendTo('#xiWindowTitle');}},close:function(title){$('#xiWindowContent').modal('hide');},height:function(height){$('#xiWindowBody').css("height",height);},width:function(width){$('#xiWindowContent').css("width",width);},autoclose:function($time){setTimeout(function(){$('#xiWindowContent').modal('hide')},$time);}};xi.route={url:function(url){if(url.indexOf('http://')===-1){var base2_url_index=url.indexOf(xi_vars['url']['base_without_scheme']);if(base2_url_index===-1){url=xi_vars['url']['base']+url;}}
return url;}};xi.ajax={create:function(sParentId,sTag,sId){var objParent=this.$(sParentId);objElement=document.createElement(sTag);objElement.setAttribute('id',sId);if(objParent){objParent.appendChild(objElement);}},remove:function(sId){$(sId).remove();},default_error_callback:function(error){alert("An error has occured\n"+error);},default_success_callback:function(result){for(var i=0;i<result.length;i++){var cmd=result[i][0];var id=result[i][1];var property=result[i][2];var data=result[i][3];switch(cmd){case'as':var objElement=$(id);if(objElement){if(property=='innerHtml'||property=='innerHTML'){$('#'+id).html(data);}else if(property=='replaceWith'){$('#'+id).replaceWith(data);}else{eval("objElement."+property+"=  data \; ");}}
break;case'al':if(data){alert(data);}
break;case'ce':xi.ajax.create(id,property,data);break;case'rm':xi.ajax.remove(id);break;case'cs':var scr=id+'(';if($.isArray(data)){scr+='(data[0])';for(var l=1;l<data.length;l++){scr+=',(data['+l+'])';}}else{scr+='data';}
scr+=');';eval(scr);break;default:alert("Unknow command: "+cmd);}}},error:function(Request,textStatus,errorThrown,errorCallback){var message='<strong>AJAX Loading Error</strong><br/>HTTP Status: '+Request.status+' ('+Request.statusText+')<br/>';message=message+'Internal status: '+textStatus+'<br/>';message=message+'XHR ReadyState: '+Request.readyState+'<br/>';message=message+'Raw server response:<br/>'+Request.responseText;errorCallback(message);},success:function(msg,successCallback,errorCallback){var junk=null;var message="";var valid_pos=msg.indexOf('###');var valid_last_pos=msg.lastIndexOf('###');if(valid_pos==-1){msg='Invalid AJAX data: '+msg;errorCallback(msg);return;}
message=msg.substr(valid_pos+3,valid_last_pos-(valid_pos+3));try{var data=JSON.parse(message);}catch(err){var msg=err.message+"\n<br/>\n<pre>\n"+message+"\n</pre>";errorCallback(msg);return;}
successCallback(data);},go:function(url,data,successCallback,errorCallback,timeout){if(data!=null&&data.iframe==true){var call={data:data,url:url};return xi.iframe.show(call);}
if(timeout==null)timeout=600000;if(errorCallback==null)errorCallback=xi.ajax.default_error_callback;if(successCallback==null)successCallback=xi.ajax.default_success_callback;ajax_url=xi.route.url(url)+'&isAjax=true';$.ajax(ajax_url,{type:"POST",cache:false,data:data,timeout:timeout,success:function(msg){xi.ajax.success(msg,successCallback,errorCallback);},error:function(Request,textStatus,errorThrown){xi.ajax.error(Request,textStatus,errorThrown,errorCallback);}});}};xi.iframe={show:function(call,appendTo,onLoadCallback){if(onLoadCallback==null)onLoadCallback=this.process;if(appendTo==null)appendTo='#xiWindowBody';if(typeof call.data.classes==="undefined"){call.data.classes='';}
if(typeof call.data.id==="undefined"){call.data.id='';}
$iframe=$('<iframe id="'+call.data.id+'" class="span12 '+call.data.classes+'" frameborder="0" scrolling="auto" height="90%">');$iframe.load(onLoadCallback).appendTo(appendTo);url=xi.route.url(call.url);$iframe.attr('src',url);return $iframe;},process:function(){}};xi.joomla={};xi.joomla.text={strings:{},"_":function(key,def){return typeof this.strings[key.toUpperCase()]!=="undefined"?this.strings[key.toUpperCase()]:def;},load:function(object){for(var key in object){this.strings[key.toUpperCase()]=object[key];}
return this;}};xi.cms=xi.joomla;$(document).ready(function(){xi.cms.text.load(xi_strings);});})(xi.jQuery);