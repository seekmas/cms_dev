/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

(function(a,l){function k(f,b){t=!1;var k=a.Deferred(),e=[],d=0;a.each(f.styles,function(d,b){a.each(f.less,function(a,f){e.push({target:"/styles/"+d+f.target,less:f.source+"\n"+b,css:"",error:""})})});if(!e.length)return k.resolve(e);a.less.getCSS(e[d].less,b).always(function g(h){"string"==a.type(h)?e[d].css=h:e[d].error=h;e[d].css=a.less.rewriteUrls(e[d].css,f.baseurl+e[d].target);a.isFunction(b.progress)&&b.progress.call(this,e[d],d,100*(d/e.length));if(e[++d]&&!t)setTimeout(function(){a.less.getCSS(e[d].less,
b).always(g)},150);else k[t?"reject":"resolve"](e)});return k.promise()}function h(){try{return!!new Blob&&void 0!==typeof FormData}catch(a){return!1}}var t;a(function(){function f(c,j){d.css("width","100%");var b={};a.each(j.styles,function(a,c){b["/styles/"+a+"/style.less"]=c});a.each(c,function(a,c){c.error||(b[c.target]=c.css)});x.text("Saving files...");System.saveFiles(b).fail(function(a){g.append('<div class="uk-alert uk-alert-danger">'+a+"</div>")}).done(function(){g.children().length||e.hide()})}
function b(c,j,b){j=c.target.replace(/^.*[\/\\]/g,"").replace(/css$/g,"less");x.text(c.target);d.css("width",Math.ceil(b)+"%");c.error&&0===a("[data-file='"+j+"']").length&&g.append('<div class="uk-alert uk-alert-danger" data-file="'+j+'"><strong>'+j+"</strong><br>"+c.error.message+"</div>")}var n=a("#config"),e=new a.UIkit.modal.Modal("#compilemodal",{bgclose:!1}),d=e.element.find(".uk-progress-bar"),x=e.element.find(".file-name"),g=e.element.find(".error-list"),v=a("[data-customizer]"),q=a("[data-style-selector]",
n),A=function(c){a('[value="'+c.prop("value")+'"]',w).not(c).attr("disabled",c.is(":checked")?"disabled":!1)},y=function(a,j){var d=a.data("layout");a.attr("data-layout",j).find('[name^="'+B+"["+d+']"]').attr("name",function(a,c){return c.replace(B+"["+d+"]",B+"["+j+"]")})},r=a("#layout"),p=a("[data-layout-selector]",r),B=r.data("field-name"),F=a("[data-action=rename], [data-action=remove]",r),w=a("[data-assignment]",r);w.filter('[data-layout="default"] [data-assignment]').hide();a("input:checked",
w).each(function(){A(a(this))});p.on("change",function(){var c=p.val();F.toggle("default"!==c);a("[data-layout]").not(a('[data-layout="'+c+'"]').show()).hide()}).trigger("change");r.on("change","[data-assignment] input",function(c){A(a(c.target))}).on("click",'[data-action="add"]',function(c){c.preventDefault();if((c=prompt("Please enter a layout name",""))&&!a('option[value="'+c+'"]',p).length){var j=a('[data-layout="default"]').clone(!0);y(j,c);a('[data-layout="default"]').parent().children("[data-layout]:last").after(j);
p.append('<option value="'+c+'">'+c+"</option>").val(c).trigger("change");a("[data-assignment]",j).show()}}).on("click",'[data-action="rename"]',function(c){c.preventDefault();c=p.val();var j=prompt("Please enter a layout name",c);j&&(c!==j&&!a('option[value="'+j+'"]',p).length)&&(y(a('[data-layout="'+c+'"]'),j),p.find('option[value="'+c+'"]').attr("value",j).html(j))}).on("click",'[data-action="remove"]',function(c){c.preventDefault();c=p.val();a('[data-layout="'+c+'"]').remove();p.find('option[value="'+
c+'"]').remove().end().trigger("change")});a("[data-layout]",r).each(function(){a('select[name$="[width]"]:first',this).on("change",function(){var c=a(this),j=c.find('option[value="'+c.val()+'"]').data("gcf");c.closest("[data-layout]").find('select[name$="[width]"]:gt(0)').each(function(){var d=a(this),b=d.val();d.empty().append(c.find("option").clone().filter(function(){return 0===a(this).val()%j})).val(d.find('option[value="'+b+'"]').length?b:d.val())})}).trigger("change")});var s=a("#menus",n);
a("tr[data-level='1'] + tr[data-level='2']",s).each(function(){a(this).prev().find("td:first").prepend('<i class="uk-icon-angle-right"></i> ').wrapInner("<span data-toggler />")});a("tbody tr[data-level!='1']",s).hide();a(s).on("click","[data-toggler]",function(){a(this).closest("tr").nextUntil("tr[data-level='1']",s).toggle();a("i",this).toggleClass("uk-icon-angle-down")});a("[data-menu-filter]",s).on("change",function(){a("[data-menu]").not(a('[data-menu="'+a(this).val()+'"]').show()).hide()}).trigger("change");
var H=n.find(".tm-sidebar ul"),D=n.find(".tm-main");H.on("click","a",function(c){c.preventDefault();D.children().not("p").hide().filter(":eq("+(l._index=H.children("li").removeClass("uk-active").index(a(this).parent().addClass("uk-active")))+")").show()}).find("li:eq("+(l._index<D.children().length?l._index:0)+") a").trigger("click");var r=function(){var c=z.val(),d=C.val();a("[data-position]","#widgets").each(function(){var b=a(this),e=b.data("position"),e=""===d||d===e;b[e?"show":"hide"]();e&&(b.find("tr[data-widget-name]").each(function(){var d=
a(this),b=d.data("widget-name"),b=""===c||-1!==b.toLowerCase().indexOf(c.toLowerCase());d.toggle(b)}),b.find("tbody>tr:visible").length||b.hide())})},C=a("[data-position-filter]","#widgets").on("change",r),z=a("[data-widget-filter]","#widgets").on("keyup",a.UIkit.Utils.debounce(r,300)),u=a('<div class="tm-icon-picker"></div>').css({position:"absolute",display:"none"}).appendTo("body"),E=[];E.push('<ul class="uk-list uk-list-space">');a.each({"Web Application Icons":"uk-icon-adjust uk-icon-anchor uk-icon-archive uk-icon-asterisk uk-icon-ban-circle uk-icon-bar-chart uk-icon-barcode uk-icon-beaker uk-icon-beer uk-icon-bell uk-icon-bell-alt uk-icon-bolt uk-icon-book uk-icon-bookmark uk-icon-bookmark-empty uk-icon-briefcase uk-icon-bug uk-icon-building uk-icon-bullhorn uk-icon-bullseye uk-icon-calendar uk-icon-calendar-empty uk-icon-camera uk-icon-camera-retro uk-icon-certificate uk-icon-check uk-icon-check-empty uk-icon-check-minus uk-icon-check-sign uk-icon-circle uk-icon-circle-blank uk-icon-cloud uk-icon-cloud-download uk-icon-cloud-upload uk-icon-code uk-icon-code-fork uk-icon-coffee uk-icon-cog uk-icon-cogs uk-icon-collapse uk-icon-collapse-alt uk-icon-collapse-top uk-icon-comment uk-icon-comment-alt uk-icon-comments uk-icon-comments-alt uk-icon-compass uk-icon-credit-card uk-icon-crop uk-icon-dashboard uk-icon-desktop uk-icon-download uk-icon-download-alt uk-icon-edit uk-icon-edit-sign uk-icon-ellipsis-horizontal uk-icon-ellipsis-vertical uk-icon-envelope uk-icon-envelope-alt uk-icon-eraser uk-icon-exchange uk-icon-exclamation uk-icon-exclamation-sign uk-icon-expand uk-icon-expand-alt uk-icon-external-link uk-icon-external-link-sign uk-icon-eye-close uk-icon-eye-open uk-icon-facetime-video uk-icon-female uk-icon-fighter-jet uk-icon-film uk-icon-filter uk-icon-fire uk-icon-fire-extinguisher uk-icon-flag uk-icon-flag-alt uk-icon-flag-checkered uk-icon-folder-close uk-icon-folder-close-alt uk-icon-folder-open uk-icon-folder-open-alt uk-icon-food uk-icon-frown uk-icon-gamepad uk-icon-gift uk-icon-glass uk-icon-globe uk-icon-group uk-icon-hdd uk-icon-headphones uk-icon-heart uk-icon-heart-empty uk-icon-home uk-icon-inbox uk-icon-info uk-icon-info-sign uk-icon-key uk-icon-keyboard uk-icon-laptop uk-icon-leaf uk-icon-legal uk-icon-lemon uk-icon-level-down uk-icon-level-up uk-icon-lightbulb uk-icon-location-arrow uk-icon-lock uk-icon-magic uk-icon-magnet uk-icon-mail-forward uk-icon-mail-reply uk-icon-mail-reply-all uk-icon-male uk-icon-map-marker uk-icon-meh uk-icon-microphone uk-icon-microphone-off uk-icon-minus uk-icon-minus-sign uk-icon-minus-sign-alt uk-icon-mobile-phone uk-icon-money uk-icon-moon uk-icon-move uk-icon-music uk-icon-off uk-icon-ok uk-icon-ok-circle uk-icon-ok-sign uk-icon-pencil uk-icon-phone uk-icon-phone-sign uk-icon-picture uk-icon-plane uk-icon-plus uk-icon-plus-sign uk-icon-plus-sign-alt uk-icon-power-off uk-icon-print uk-icon-pushpin uk-icon-puzzle-piece uk-icon-qrcode uk-icon-question uk-icon-question-sign uk-icon-quote-left uk-icon-quote-right uk-icon-random uk-icon-refresh uk-icon-remove uk-icon-remove-circle uk-icon-remove-sign uk-icon-reorder uk-icon-reply uk-icon-reply-all uk-icon-resize-horizontal uk-icon-resize-vertical uk-icon-retweet uk-icon-road uk-icon-rocket uk-icon-rss uk-icon-rss-sign uk-icon-screenshot uk-icon-search uk-icon-share uk-icon-share-alt uk-icon-share-sign uk-icon-shield uk-icon-shopping-cart uk-icon-sign-blank uk-icon-signal uk-icon-signin uk-icon-signout uk-icon-sitemap uk-icon-smile uk-icon-sort uk-icon-sort-by-alphabet uk-icon-sort-by-alphabet-alt uk-icon-sort-by-attributes uk-icon-sort-by-attributes-alt uk-icon-sort-by-order uk-icon-sort-by-order-alt uk-icon-sort-down uk-icon-sort-up uk-icon-spinner uk-icon-star uk-icon-star-empty uk-icon-star-half uk-icon-star-half-empty uk-icon-star-half-full uk-icon-subscript uk-icon-suitcase uk-icon-sun uk-icon-superscript uk-icon-tablet uk-icon-tag uk-icon-tags uk-icon-tasks uk-icon-terminal uk-icon-thumbs-down uk-icon-thumbs-down-alt uk-icon-thumbs-up uk-icon-thumbs-up-alt uk-icon-ticket uk-icon-time uk-icon-tint uk-icon-trash uk-icon-trophy uk-icon-truck uk-icon-umbrella uk-icon-unchecked uk-icon-unlock uk-icon-unlock-alt uk-icon-upload uk-icon-upload-alt uk-icon-user uk-icon-volume-down uk-icon-volume-off uk-icon-volume-up uk-icon-warning-sign uk-icon-wrench uk-icon-zoom-in uk-icon-zoom-out".split(" "),
"Currency Icons":"uk-icon-bitcoin uk-icon-btc uk-icon-cny uk-icon-dollar uk-icon-eur uk-icon-euro uk-icon-gbp uk-icon-inr uk-icon-jpy uk-icon-krw uk-icon-renminbi uk-icon-rupee uk-icon-usd uk-icon-won uk-icon-yen".split(" "),"Text Editor Icons":"uk-icon-align-center uk-icon-align-justify uk-icon-align-left uk-icon-align-right uk-icon-bold uk-icon-columns uk-icon-copy uk-icon-cut uk-icon-eraser uk-icon-file uk-icon-file-alt uk-icon-file-text uk-icon-file-text-alt uk-icon-font uk-icon-indent-left uk-icon-indent-right uk-icon-italic uk-icon-link uk-icon-list uk-icon-list-alt uk-icon-list-ol uk-icon-list-ul uk-icon-paper-clip uk-icon-paperclip uk-icon-paste uk-icon-repeat uk-icon-rotate-left uk-icon-rotate-right uk-icon-save uk-icon-strikethrough uk-icon-table uk-icon-text-height uk-icon-text-width uk-icon-th uk-icon-th-large uk-icon-th-list uk-icon-underline uk-icon-undo uk-icon-unlink".split(" "),
"Directional Icons":"uk-icon-angle-down uk-icon-angle-left uk-icon-angle-right uk-icon-angle-up uk-icon-arrow-down uk-icon-arrow-left uk-icon-arrow-right uk-icon-arrow-up uk-icon-caret-down uk-icon-caret-left uk-icon-caret-right uk-icon-caret-up uk-icon-chevron-down uk-icon-chevron-left uk-icon-chevron-right uk-icon-chevron-sign-down uk-icon-chevron-sign-left uk-icon-chevron-sign-right uk-icon-chevron-sign-up uk-icon-chevron-up uk-icon-circle-arrow-down uk-icon-circle-arrow-left uk-icon-circle-arrow-right uk-icon-circle-arrow-up uk-icon-double-angle-down uk-icon-double-angle-left uk-icon-double-angle-right uk-icon-double-angle-up uk-icon-hand-down uk-icon-hand-left uk-icon-hand-right uk-icon-hand-up uk-icon-long-arrow-down uk-icon-long-arrow-left uk-icon-long-arrow-right uk-icon-long-arrow-up".split(" "),
"Video Player Icons":"uk-icon-backward uk-icon-eject uk-icon-fast-backward uk-icon-fast-forward uk-icon-forward uk-icon-fullscreen uk-icon-pause uk-icon-play uk-icon-play-circle uk-icon-play-sign uk-icon-resize-full uk-icon-resize-small uk-icon-step-backward uk-icon-step-forward uk-icon-stop uk-icon-youtube-play".split(" "),"Brand Icons":"uk-icon-adn uk-icon-android uk-icon-apple uk-icon-bitbucket uk-icon-bitbucket-sign uk-icon-bitcoin uk-icon-btc uk-icon-css3 uk-icon-dribbble uk-icon-dropbox uk-icon-facebook uk-icon-facebook-sign uk-icon-flickr uk-icon-foursquare uk-icon-github uk-icon-github-alt uk-icon-github-sign uk-icon-gittip uk-icon-google-plus uk-icon-google-plus-sign uk-icon-html5 uk-icon-instagram uk-icon-linkedin uk-icon-linkedin-sign uk-icon-linux uk-icon-maxcdn uk-icon-pinterest uk-icon-pinterest-sign uk-icon-renren uk-icon-skype uk-icon-stackexchange uk-icon-trello uk-icon-tumblr uk-icon-tumblr-sign uk-icon-twitter uk-icon-twitter-sign uk-icon-vk uk-icon-weibo uk-icon-windows uk-icon-xing uk-icon-xing-sign uk-icon-youtube uk-icon-youtube-play uk-icon-youtube-sign".split(" "),
"Medical Icons":"uk-icon-ambulance uk-icon-h-sign uk-icon-hospital uk-icon-medkit uk-icon-plus-sign-alt uk-icon-stethoscope uk-icon-user-md".split(" ")},function(c,d){E.push("<li><strong>"+c+"</strong></li>");a.each(d,function(){E.push('<li><a href="" class="'+this+' uk-icon-small" data-icon="'+this+'"> '+this+"</a></li>")})});E.push("</ul>");u.append(E.join("\n"));a(".tm-main").on("focus","input[name$='[icon]']",function(c){c.preventDefault();c=a(this);var d=c.offset(),b=d.top+c.height()+15;left=
d.left;u.data("input",c).css({top:b,left:left}).show();u[0].scrollTop=0});u.on("click","[class*='uk-icon']",function(c){c.preventDefault();u.data("input").val(a(this).data("icon"));u.hide()});a(document).on("click",function(c){u.is(":visible")&&!a(c.target).is("input[name$='[icon]']")&&u.hide()});a("[data-list-devices]").on("click","li",function(c){c.preventDefault();a(this).toggleClass("active").find("input").val(a(this).hasClass("active")?"1":"0")}).find("li").each(function(){a(this).toggleClass("active",
"0"!==a(this).find("input").val())});e.element.find("button").on("click",function(){t=!0;e.hide()});if(h())a("[href=#compile]").on("click",function(a){a.preventDefault();d.css("width","0%");g.html("");x.html("");e.show();setTimeout(function(){System.data().done(function(a){k(a,{progress:b}).done(function(c){f(c,a)}).fail(function(){e.hide()})}).fail(function(){e.hide()})},300)});else a("[href=#compile]").attr("disabled","disabled").on("click",function(a){a.preventDefault()});if(h()){var G=!1;a("a",
v).on("click",function(c){c.preventDefault();G||(G=!0,System.data().done(function(c){var r=a("body").addClass("cm-open");a.cookie(c.cookie,"1",{expires:1,path:"/"});n.append(a("[type*=template]",v).mustache());var h=function(d){var b=s.contents(),e=!0,f=!1,r=!1;a.each(c.less,function(c,j){if(!f){var g=b.find("head [data-file='"+j.target+"']");g.length&&(a.less.getCSS(j.source,{id:j.target,variables:d.variables,compress:!0}).done(function(c){e&&d.fonts&&(c=d.fonts+"\n"+c);"rtl"==b.find("html").attr("dir")&&
(c=a.rtl.convert2RTL(c));g.attr("href")?g.replaceWith(a("<style>").attr("data-file",g.data("file")).text(c)):g.text(c)}).fail(function(a){z.trigger("show",a);f=!0}),e=!1,r=!0)}});f||(y.show(),s.css("visibility","visible"),B.hide(),z.trigger("hide"));C.trigger(!r?"show":"hide","The current theme is not customizable.")},m=a("#customizer"),p=a("select[name=style]",m),u=a("[href='#copy']",m),t=a("[href='#remove']",m).hide(),s=a("#cm-theme-preview",m).css("visibility","hidden"),B=a("i.cm-spinner",m),z=
a(".cm-error",m),F=function(){r.removeClass("cm-open")},D=function(I,h){r.removeClass("cm-open");var p=c.styles,s={};c.styles={};a.each(h,function(d,b){if(I!=b.name&&p[b.name])c.styles[b.name]=p[b.name];else{var e=[];b.fonts&&e.push(b.fonts);a.each(b.variables,function(a,c){e.push(a+": "+c+";")});c.styles[b.name]=s[b.name]=e.join("\n")}});var m={styles:[]};a.each(c.styles,function(a){m.styles.push({name:a})});q.each(function(){var c=a(this),b=c.val();c.html(a.mustache('{{#styles}}<option value="{{name}}">{{name}}</option>{{/styles}}',
m));c.trigger("update",b)});d.css("width","0%");g.html("");x.html("");e.show();k(a.extend({},c,{styles:s}),{progress:b}).done(function(a){f(a,c)}).fail(function(){e.hide()})},l=[],w,y=a(".cm-sidebar-content",m),C=a(".cm-sidebar-message",m).hide();a.each(c.styles,function(b,d){l.push({name:b,config:c.config,config_vars:c.config_vars,variables:a.less.getVars(d)})});m.customizer({styles:l,updating:function(a,c){t.toggle("default"!=c.name);y.hide();s.css("visibility","hidden");B.show()},updated:function(c,
b){var d;b.fonts="";a("option[data-url]:selected",m).each(function(){if((d=a(this).data("url"))&&-1===b.fonts.indexOf("'"+d+"'"))b.fonts+="@import '"+d+"';\n"});h(w=b)}});s.on("load",function(){w?h(w):m.trigger("update")});z.on({show:function(c,b){z.html(a.mustache('<h1 class="uk-h3">LESS {{type}} Error</h1><p>{{message}}</p>',b)).show();s.css("visibility","hidden")},hide:function(){z.hide();s.css("visibility","visible")}});C.on({show:function(a,c){C.html(c).show();y.css("visibility","hidden")},hide:function(){C.hide();
y.css("visibility","visible")}});u.on("click",function(b){b.preventDefault();(b=prompt("Please enter a style name",""))&&!a('option[value="'+b+'"]',p).length&&l.push({name:b,config:c.config,config_vars:c.config_vars,variables:a.extend({},w.variables)});m.trigger("update",b)});t.on("click",function(c){c.preventDefault();var b;a.each(l,function(a,c){p.val()==c.name&&(b=a)});null!==b&&l.splice(b,1);m.trigger("update")});a("[href='#save']",m).on("click",function(b){b.preventDefault();m.remove();a.removeCookie(c.cookie,
{path:"/"});a.isFunction(D)&&D.call(this,p.val(),l)});a("[href='#reset']",m).on("click",function(b){b.preventDefault();b=p.val();var d;a.each(l,function(a,c){p.val()==c.name&&(d=a)});c.styles[b]&&null!==d&&(a.extend(l[d],{config:c.config,variables:a.less.getVars(c.styles[b]),groups:""}),m.trigger("update",[b,!0]))});a("[href='#cancel']",m).on("click",function(b){b.preventDefault();m.remove();a.removeCookie(c.cookie,{path:"/"});a.isFunction(F)&&F.call(this)})}).fail(function(c){a("a",v).after(a('<div class="uk-alert uk-alert-danger" />').text(c))}).always(function(){G=
!1}))})}else a("a",v).attr("disabled","disabled").on("click",function(a){a.preventDefault()}),n.prepend('<div class="uk-alert uk-alert-danger">Your browser does not support the customizing and LESS compiling features. Please update your browser.</div>');q.on("update",function(c,b){var d=a(this);b||(b=d.data("selected"));d.val(d.find('option[value="'+b+'"]').length?b:d.val())}).trigger("update")})})(jQuery,window.sessionStorage||{});
(function(a){var l=function(k,h){function l(a,b){var e="^"+a.replace(/\//g,"\\/").replace(/\*\*/g,"(\\/[^\\/]+)*").replace(/\*/g,"[^\\/]+").replace(/((?!\\))\?/g,"$1.")+"$";return null!==b.match(RegExp("^"+e+"$"))}var f=a(h.select,k),b=a(h.sidebar,k),n=a(h.advanced,k),e;k.on({update:function(d,n,g){a("option",f).length!=h.styles.length&&f.html(a.mustache(h.template.select,h));n&&f.val(n);var v=f.val();d=e;a.each(h.styles,function(a,b){v==b.name&&(e=b)});if(e!==d||g){k.trigger("updating",e);var q=
e,A=a.Deferred();q.groups?g=A.resolve():(a.ajax({url:q.config,cache:!1,dataType:"json"}).done(function(b){var d=a.extend({},q.config_vars);q.config=b;q.groups=[];q.variables=q.variables||{};q.matchName=l;a.each(q.config.groups,function(b,e){var f,g={label:e.label,variables:[],advanced:e.advanced||!1,more:!1};a.each(e.vars,function(b,e){a.each(d,function(a,b){l(e,a)&&(delete d[a],f={name:a,"default":b,placeholder:b,label:a.replace(/^@/,"").replace(/^\w+\-/,"").replace(/\-/g," "),more:-1!==b.indexOf("@"),
value:function(){return q.variables[a]?q.variables[a]:""}},f.more&&(g.more=!0,f.placeholder="@"),g.variables.push(f))})});g.variables.length&&q.groups.push(g)});A.resolve()}),g=A.promise());g.done(function(){var d=e;b.html(a.mustache(h.template.sidebar,d));b.find("input[data-name]").each(function(){var b=a(this),e=b.val()||b.data("default"),f,g;-1===b.attr("data-default").indexOf("@")&&a.each(d.config.controls,function(d,h){a.each(h.vars,function(d,k){if(l(k,b.attr("data-name")))switch(h.type){case "color":var n=
a('<div class="sp-placeholder"><div class="sp-placeholder-color"></div></div>').find("div").css("background-color",e).end().on("click",function(){var d;b.spectrum({showInput:!0,showAlpha:!0,color:e,change:function(a){1>a.toRgb().a&&b.val(a.toRgbString()).trigger("change")},show:function(){d||(d=a.fn.spectrum.get(b.data("spectrum.id")),d.container.find(".sp-cancel").after(a('<a href="#" class="sp-reset">reset</a>').on("click",function(a){a.preventDefault();d.set(b.data("default"));d.hide();b.val("")})))}}).on("show-spectrum",
function(){parseInt(d.container.find(".sp-slider").css("top"))>d.container.find(".sp-hue").height()&&d.container.find(".sp-slider").css("top",0)});n.remove();setTimeout(function(){b.spectrum("show")},50)});b.hide().after(n);break;case "font":g=[];a.isArray(h.options)?g.push({group:"",options:h.options}):a.each(h.options,function(a,b){g.push({group:a,options:b})});f=a(a.mustache('<select>{{#groups}}{{#group}}<optgroup label="{{group}}">{{/group}}{{#options}}<option value="{{value}}"{{#url}} data-url="{{url}}"{{/url}}>{{name}}</option>{{/options}}{{#group}}</optgroup>{{/group}}{{/groups}}</select>',
{groups:g}));b.replaceWith(f.val(e).attr("class",b.attr("class")).attr("name",b.attr("name")).attr("data-name",b.attr("data-name")));break;case "select":f=a(a.mustache('<select>{{#options}}<option value="{{value}}">{{name}}</option>{{/options}}</select>',{options:h.options})),b.replaceWith(f.val(e).attr("class",b.attr("class")).attr("name",b.attr("name")).attr("data-name",b.attr("data-name")))}})})});k.trigger("updated",e)})}},updating:h.updating,updated:h.updated});f.on("change",function(){setTimeout(function(){k.trigger("update")},
1)});n.on("change",function(){b[a(this).prop("checked")?"addClass":"removeClass"]("cm-show-advanced")}).trigger("change");k.on("click","a.cm-more-link",function(b){b.preventDefault();a(this).parents("fieldset:first").toggleClass("cm-show-more")});k.on("change","input[name=vars], select[name=vars]",function(b){b.preventDefault();b=a(this).attr("data-name");var f=a(this).val();""===f?delete e.variables[b]:e.variables[b]=f;k.trigger("updated",e)})};a.fn.customizer=function(k){return this.each(function(){var h=
{updating:a.noop(),updated:a.noop(),select:"select[name=style]",advanced:"input[name=advanced]",sidebar:"section.cm-sidebar-content",template:{select:'{{#styles}}<option value="{{name}}">{{name}}</option>{{/styles}}',sidebar:'<div class="cm-vars cm-form uk-form">                             {{#groups}}                             <fieldset{{#advanced}} class="cm-advanced"{{/advanced}}>                                 <h2 class="cm-form-title">{{label}}{{#more}} <a href="#" class="cm-more-link"></a>{{/more}}</h2>                                 {{#variables}}                                 <div class="uk-form-row{{#more}} cm-more{{/more}}">                                     <label class="uk-form-label" title="{{name}}">{{label}}</label>                                     <div class="uk-form-controls">                                         <input class="uk-form-small" name="vars" type="text"{{#value}} value="{{value}}"{{/value}} placeholder="{{placeholder}}" data-name="{{name}}" data-default="{{default}}">                                     </div>                                 </div>                                 {{/variables}}                             </fieldset>                             {{/groups}}                         </div>'}};
new l(a(this),a.extend({},h,k))})}})(jQuery);
if("function"!=typeof window.parse_str)var parse_str=function(a,l){var k=String(a).replace(/^&/,"").replace(/&$/,"").split("&"),h=k.length,t,f,b,n,e,d,x,g,v;l||(l=this.window);for(t=0;t<h;t++){f=k[t].split("=");b=decodeURIComponent(f[0].replace(/\+/g,"%20"));for(x=2>f.length?"":decodeURIComponent(f[1].replace(/\+/g,"%20"));" "===b.charAt(0);)b=b.slice(1);-1<b.indexOf("\x00")&&(b=b.slice(0,b.indexOf("\x00")));if(b&&"["!==b.charAt(0)){g=[];for(f=d=0;f<b.length;f++)if("["===b.charAt(f)&&!d)d=f+1;else if("]"===
b.charAt(f)&&d&&(g.length||g.push(b.slice(0,d-1)),g.push(b.substr(d,f-d)),d=0,"["!==b.charAt(f+1)))break;g.length||(g=[b]);for(f=0;f<g[0].length;f++){d=g[0].charAt(f);if(" "===d||"."===d||"["===d)g[0]=g[0].substr(0,f)+"_"+g[0].substr(f+1);if("["===d)break}d=l;f=0;for(v=g.length;f<v;f++)if(b=g[f].replace(/^['"]/,"").replace(/['"]$/,""),e=d,""!==b&&" "!==b||0===f)void 0===d[b]&&(d[b]={}),d=d[b];else{b=-1;for(n in d)d.hasOwnProperty(n)&&+n>b&&n.match(/^\d+$/g)&&(b=+n);b+=1}e[b]=x}}};
